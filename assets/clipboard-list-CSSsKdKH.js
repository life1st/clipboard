import{u as s,a as e,b as a,c as i,j as t,M as n,B as l,S as c,d as r,e as o,f as d,D as h,g as m}from"./index-JISBR4xu.js";import{r as x,L as j}from"./vendor-BpSuX29s.js";import{c as p}from"./index-uetpjLjy.js";import"./api-C-1G2k3o.js";import"./store-PA_90aFs.js";const u=()=>{const{isOpen:c,content:r,closeModal:o,setContent:d}=s(),{addItem:h}=e(),{gistId:m,githubToken:j}=a(),{showSuccess:p,showError:u}=i(),g=x.useMemo(()=>!(!m||!j),[m,j]);return t.jsxs(n,{isOpen:c,onClose:o,title:"æ·»åŠ å‰ªè´´æ¿é¡¹ç›®",className:"paste-modal",children:[t.jsxs("div",{className:"input-group",children:[t.jsx("label",{children:"å†…å®¹:"}),t.jsx("textarea",{value:r,onChange:s=>d(s.target.value),placeholder:"ç²˜è´´æˆ–è¾“å…¥å†…å®¹",rows:6})]}),g&&t.jsxs("div",{className:"input-group",children:[t.jsxs("label",{children:[t.jsx("input",{type:"checkbox",checked:!0,disabled:!0}),"è‡ªåŠ¨åŒæ­¥åˆ° Gist (clipboard.json)"]}),t.jsx("small",{className:"help-text",children:"é¡¹ç›®æ·»åŠ åå°†è‡ªåŠ¨æ›´æ–°åˆ° Gist ä¸­çš„ clipboard.json æ–‡ä»¶"})]}),t.jsxs("div",{className:"modal-actions",children:[t.jsx(l,{variant:"primary",onClick:async()=>{if(r.trim())try{await h(r.trim()),p(g?"é¡¹ç›®å·²æ·»åŠ å¹¶åŒæ­¥åˆ° Gist":"é¡¹ç›®å·²æ·»åŠ åˆ°æœ¬åœ°"),o()}catch(s){u(g?`é¡¹ç›®å·²æ·»åŠ åˆ°æœ¬åœ°ï¼Œä½† Gist åŒæ­¥å¤±è´¥: ${s.message}`:`æ·»åŠ å¤±è´¥: ${s.message}`)}},disabled:!r.trim(),fullWidth:!0,children:"æ·»åŠ "}),t.jsx(l,{variant:"ghost",onClick:o,fullWidth:!0,children:"å–æ¶ˆ"})]})]})},g=({item:s,onDelete:e})=>{const{showError:a}=i(),[n,l]=x.useState(!1),c=x.useCallback(m(()=>l(!1),2e3),[]);return t.jsxs("div",{className:"clipboard-item",onClick:()=>(async s=>{try{await navigator.clipboard.writeText(s),l(!0),c()}catch(e){a("å¤åˆ¶å¤±è´¥ï¼Œè¯·æ£€æŸ¥æµè§ˆå™¨æƒé™")}})(s.content),children:[t.jsxs("div",{className:"item-content",children:[t.jsx("div",{className:"content-text",children:s.content.length>100?s.content.substring(0,100)+"...":s.content}),t.jsxs("div",{className:"item-meta",children:[t.jsx("span",{className:"timestamp",children:new Date(s.timestamp).toLocaleString()}),t.jsx("span",{className:p("copy-status",{copied:n}),children:n?"âœ…å·²å¤åˆ¶":"ç‚¹å‡»å¤åˆ¶"})]})]}),t.jsx("button",{type:"button",onClick:async i=>{i.stopPropagation();try{await e(s.id)}catch(t){a(`åˆ é™¤å¤±è´¥: ${t.message}`)}},onMouseDown:s=>s.stopPropagation(),onFocus:s=>s.stopPropagation(),title:"åˆ é™¤",className:"delete-button",children:"âœ•"})]})},v=()=>{const{items:n,loading:m,error:p,lastSync:v,maxItems:N,sortBy:b,sortOrder:y,deleteItem:C,clearAll:T,setError:f,setMaxItems:M,setSortBy:S,setSortOrder:k,loadFromGist:I}=e(),{showError:w}=i(),G=x.useMemo(()=>n.length,[n]),E=x.useMemo(()=>n.length>0,[n]),{gistId:D,githubToken:A}=a(),{openModal:O}=s(),[P,$]=x.useState(!0),z=x.useMemo(()=>!(!D||!A),[D,A]);return t.jsx("div",{className:"clipboard-list-page",children:t.jsxs("div",{className:"page-content",children:[!z&&t.jsx("div",{className:"config-prompt-section",children:t.jsxs("div",{className:"config-prompt",children:[t.jsx("div",{className:"prompt-icon",children:"âš™ï¸"}),t.jsxs("div",{className:"prompt-content",children:[t.jsx("h3",{children:"éœ€è¦é…ç½® Gist åŒæ­¥"}),t.jsx("p",{children:"è¦ä½¿ç”¨ Gist åŒæ­¥åŠŸèƒ½ï¼Œè¯·å…ˆåœ¨è®¾ç½®é¡µé¢é…ç½® GitHub Token å’Œ Gist ID"}),t.jsx(j,{to:"/settings",children:t.jsx(l,{variant:"primary",fullWidth:!0,children:"ğŸš€ å‰å¾€è®¾ç½®é¡µé¢"})})]})]})}),z&&t.jsxs("div",{className:"gist-sync-section",children:[t.jsxs("div",{className:"gist-sync-header",children:[t.jsx("h3",{children:"Gist åŒæ­¥"}),t.jsx(l,{variant:"secondary",onClick:async()=>{z?I():f("è¯·å…ˆåœ¨è®¾ç½®é¡µé¢é…ç½® Gist ID å’Œ Token")},disabled:m||!z,loading:m,fullWidth:!0,title:"ä¿å­˜å½“å‰æ•°æ®åˆ° Gist",size:"sm",className:"gist-sync-button",children:m?"åŒæ­¥ä¸­...":"ä» Gist åŒæ­¥"})]}),t.jsxs("div",{className:"sync-info",children:[t.jsxs("span",{children:["Gist ID: ",D?"âœ…":"âŒ"]}),t.jsxs("span",{children:["Token: ",A?"âœ…":"âŒ"]})]}),t.jsx("div",{className:"sync-controls",children:t.jsxs("div",{className:"auto-load-info",children:[t.jsx("span",{className:"info-text",children:E?`å·²åŠ è½½ ${G} ä¸ªé¡¹ç›®`:"æš‚æ— æ•°æ®ï¼Œå°†è‡ªåŠ¨ä» Gist åŠ è½½"}),v&&t.jsxs("span",{className:"last-sync",children:["æœ€ååŒæ­¥: ",new Date(v).toLocaleString()]})]})})]}),t.jsxs("div",{className:"settings-section",children:[t.jsxs("div",{className:"settings-header",children:[t.jsx("h3",{children:"æ˜¾ç¤ºè®¾ç½®"}),t.jsx(l,{variant:"ghost",size:"sm",onClick:()=>$(!P),title:P?"å±•å¼€æ˜¾ç¤ºè®¾ç½®":"æŠ˜å æ˜¾ç¤ºè®¾ç½®",children:P?"â–¶ï¸":"â–¼ï¸"})]}),!P&&t.jsxs("div",{className:"display-options",children:[t.jsxs("div",{className:"input-group",children:[t.jsx("label",{children:"æ’åºæ–¹å¼:"}),t.jsxs("select",{value:b,onChange:s=>S(s.target.value),children:[t.jsx("option",{value:r.TIMESTAMP,children:c[r.TIMESTAMP]}),t.jsx("option",{value:r.CONTENT,children:c[r.CONTENT]})]})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("label",{children:"æ’åºé¡ºåº:"}),t.jsxs("select",{value:y,onChange:s=>k(s.target.value),children:[t.jsx("option",{value:d.DESC,children:o[d.DESC]}),t.jsx("option",{value:d.ASC,children:o[d.ASC]})]})]}),t.jsxs("div",{className:"input-group",children:[t.jsx("label",{children:"æœ€å¤§æ˜¾ç¤ºé¡¹ç›®æ•°:"}),t.jsx("input",{type:"number",value:N,onChange:s=>M(parseInt(s.target.value)||h.DEFAULT_ITEMS),min:h.MIN_ITEMS,max:h.MAX_ITEMS})]})]})]}),p&&t.jsx("div",{className:"error-message",children:p}),t.jsxs("div",{className:"clipboard-section",children:[t.jsxs("div",{className:"section-header",children:[t.jsxs("h3",{children:["å‰ªè´´æ¿é¡¹ç›® (",G,")"]}),t.jsx("div",{className:"header-actions",children:t.jsx(l,{variant:"danger",onClick:async()=>{if(window.confirm("ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰é¡¹ç›®å—ï¼Ÿ"))try{await T()}catch(s){w(`æ¸…ç©ºå¤±è´¥: ${s.message}`)}},disabled:!E,size:"sm",children:"æ¸…ç©ºæ‰€æœ‰"})})]}),0===n.length?t.jsxs("div",{className:"empty-state",children:[t.jsx("p",{children:"æš‚æ— å‰ªè´´æ¿é¡¹ç›®"}),t.jsx("p",{children:"ç‚¹å‡»å³ä¸‹è§’çš„ç²˜è´´æŒ‰é’®æ¥æ·»åŠ å†…å®¹"})]}):t.jsx("div",{className:"clipboard-list",children:n.map(s=>t.jsx(g,{item:s,onDelete:C},s.id))})]}),t.jsx(l,{variant:"primary",size:"lg",onClick:()=>{navigator.clipboard.readText().then(s=>{O(s)}).catch(s=>{f("è¯»å–å‰ªè´´æ¿å¤±è´¥ï¼Œè¯·æ£€æŸ¥æµè§ˆå™¨æƒé™")})},title:"ä»å‰ªè´´æ¿ç²˜è´´",className:"floating-paste-button",children:"Paste"}),t.jsx(u,{})]})})};export{v as default};
